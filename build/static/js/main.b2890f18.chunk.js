(this.webpackJsonpmessage_board=this.webpackJsonpmessage_board||[]).push([[0],{34:function(e,n,t){e.exports=t(46)},46:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(21),c=t.n(o),i=t(30),l=t(1),u=t.n(l),s=t(5),m=t(4),d=t(13),f=t(9),p=t(3);function b(){var e=Object(m.a)(["\n  background: rgba(0, 0, 0, 0.02);\n  border: 5px solid white;\n  padding: 5px;\n  line-height: 1.5;\n  font-weight: 600;\n  display: flex;\n  justify-content: space-around;\n  flex-direction: column;\n  label {\n    display: block;\n    margin-bottom: 1rem;\n  }\n  input,\n  textarea,\n  select {\n    width: 100%;\n    padding: 0.5rem;\n    font-size: 1rem;\n    border: 0;\n  }\n  button,\n  input[type='submit']{  \n    display: inline-block;  \n    border-radius: 4px;  \n    background-color: #f4511e;  \n    border: none;  \n    background-color: ",";  \n    color: white;\n    text-align: center;\n    font-size: 12px;\n    padding: 10px 0;  \n    width: 10%;  \n    transition: all 0.5s;  \n    cursor: pointer;  \n    }\n  .form-item {\n    margin: 0.5rem;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n  }\n  button:hover {\n    opacity: 0.5;\n  }\n"]);return b=function(){return e},e}var h=p.b.form(b(),(function(e){return e.theme.red})),g=function(e){var n=e.title,t=e.onTitleChange,a=e.onContentChange,o=e.content,c=e.addPost;return r.a.createElement(h,{onSubmit:c},r.a.createElement("div",{class:"form-item"},r.a.createElement("p",null,"Title"),r.a.createElement("input",{value:n,onChange:t})),r.a.createElement("div",{class:"form-item"},r.a.createElement("p",null,"Content"),r.a.createElement("textarea",{value:o,onChange:a})),r.a.createElement("div",{class:"form-item"},r.a.createElement("button",{type:"submit"},"Submit")))};function v(){var e=Object(m.a)(["\n  display: flex;\n  justify-content: space-between;\n  .username {\n    color: ",";\n    font-weight: 800;\n  }\n  .left {\n    display: flex;\n  }\n  .right {\n    font-weight: 100;\n    color: ",";\n    font-size: 8px;\n    min-width: 100px;\n  }\n"]);return v=function(){return e},e}var E=p.b.div(v(),(function(e){return e.theme.red}),(function(e){return e.theme.grey})),y=function(e){var n=e.content,t=e.user,a=e.date;return r.a.createElement(E,null,r.a.createElement("div",{className:"left"},r.a.createElement("p",{className:"username"},t),r.a.createElement("p",null,n)),r.a.createElement("div",{className:"right"},r.a.createElement("p",null,function(e){var n=new Date(e),t=Math.floor((new Date-n)/1e3),a=Math.floor(t/31536e3);return a>1?a+" years":(a=Math.floor(t/2592e3))>1?a+" months":(a=Math.floor(t/86400))>1?a+" days":(a=Math.floor(t/3600))>1?a+" hours":(a=Math.floor(t/60))<1?a+" minutes":Math.floor(t/60)+" minutes"}(a))))},x=function(e){var n=e.postId,t=e.addComment,a=e.handleCommentChange,o=e.comment;return r.a.createElement(h,{onSubmit:function(e){return t(e,n)}},r.a.createElement("div",{className:"form-item"},r.a.createElement("input",{type:"text",value:o,onChange:a})),r.a.createElement("div",{className:"form-item"},r.a.createElement("button",{type:"submit"},"Submit")))};function j(){var e=Object(m.a)(["\n  background: white;\n  border: 1px solid ",";\n  position: relative;\n  padding: 10px;\n  margin-top: 20px;\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n"]);return j=function(){return e},e}var w=p.b.div(j(),(function(e){return e.theme.offWhite})),O=t(10);function C(){var e=Object(m.a)(["\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: space-around;\n  color: ","\n"]);return C=function(){return e},e}function k(){var e=Object(m.a)(["\n   min-height: 100px;\n   display: flex;\n   flex-direction: column;\n   align-items: space-around;\n"]);return k=function(){return e},e}function S(){var e=Object(m.a)(["\n  cursor: pointer;\n  display: flex;\n  justify-content: space-between;\n  font-weight: 100;\n"]);return S=function(){return e},e}var N=p.b.div(S()),z=p.b.div(k()),T=p.b.div(C(),(function(e){return e.theme.red})),D=function(e){var n=e.title,t=e.content,o=e.likes,c=e.addLike,i=e.comments,l=e.id,u=e.comment,m=e.user,d=e.date,f=e.currentUser,p=e.addComment,b=e.handleCommentChange,h=Object(a.useState)(!1),g=Object(s.a)(h,2),v=g[0],E=g[1];return r.a.createElement(w,null,r.a.createElement(N,null,r.a.createElement("h1",null,n),r.a.createElement("div",null,r.a.createElement("p",null,"A post by ",m.username),r.a.createElement("p",null,function(e){var n=new Date(e),t=n.getDate(),a=n.getMonth(),r=n.getFullYear();return t+" "+["January","February","March","April","May","June","July","August","September","October","November","December"][a]+" "+r}(d)))),r.a.createElement("hr",null),r.a.createElement(z,null,r.a.createElement("p",null,t)),r.a.createElement("hr",null),r.a.createElement("h2",null,o," Likes "),f&&r.a.createElement(T,null,r.a.createElement("p",{onClick:function(){return c(l)}},"Like ",r.a.createElement(O.e,null)),r.a.createElement("p",{onClick:function(){return E(!0)}},"Leave a comment ",r.a.createElement(O.b,null))),v&&f&&i.map((function(e){return r.a.createElement(y,{key:e.id,content:e.content,user:e.user.username,date:e.date})})),v&&f&&r.a.createElement(x,{addComment:p,handleCommentChange:b,comment:u,postId:l}),!f&&r.a.createElement("a",{style:{color:"grey"},href:"/login"},"Login to leave a comment"))},P=null,A={getAll:function(){var e,n;return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.awrap(fetch("/api/posts"));case 2:return e=t.sent,t.next=5,u.a.awrap(e.json());case 5:return n=t.sent,t.abrupt("return",n);case 7:case"end":return t.stop()}}))},create:function(e){var n,t,a;return u.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return n={method:"POST",headers:{Authorization:P,"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(e)},console.log(n),r.next=4,u.a.awrap(fetch("/api/posts",n));case 4:return t=r.sent,r.next=7,u.a.awrap(t.json());case 7:return a=r.sent,r.abrupt("return",a);case 9:case"end":return r.stop()}}))},update:function(e,n){var t,a,r;return u.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t={method:"PUT",headers:{Authorization:P,"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(n)},o.next=3,u.a.awrap(fetch("".concat("/api/posts","/").concat(e),t));case 3:return a=o.sent,o.next=6,u.a.awrap(a.json());case 6:return r=o.sent,console.log(r,"result"),o.abrupt("return",r);case 9:case"end":return o.stop()}}))},createComment:function(e,n){var t,a,r;return u.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t={method:"POST",headers:{Authorization:P,"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(n)},console.log(t),o.next=4,u.a.awrap(fetch("".concat("/api/posts","/").concat(e,"/comments"),t));case 4:return a=o.sent,o.next=7,u.a.awrap(a);case 7:return r=o.sent,console.log(r),o.abrupt("return",r);case 10:case"end":return o.stop()}}))},setToken:function(e){P="bearer ".concat(e)}},J={login:function(e){var n,t,a;return u.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return n={method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(e)},console.log(n.body),r.next=4,u.a.awrap(fetch("/api/login",n));case 4:return t=r.sent,r.next=7,u.a.awrap(t.json());case 7:return a=r.sent,r.abrupt("return",a);case 9:case"end":return r.stop()}}))}},M=function(e){var n=e.handleSubmit,t=e.username,a=e.password,o=e.handleUsernameChange,c=e.handlePasswordChange;return r.a.createElement("div",null,r.a.createElement(h,{onSubmit:n},r.a.createElement("div",{className:"form-item"},r.a.createElement("p",null,"Username"),r.a.createElement("input",{value:t,onChange:o})),r.a.createElement("div",{className:"form-item"},r.a.createElement("p",null,"Password"),r.a.createElement("input",{value:a,onChange:c})),r.a.createElement("div",{className:"form-item"},r.a.createElement("button",{type:"submit"},"login"))))},U=t(24),L=t(25),W=t(29),F=t(26),I=t(33);function B(){var e=Object(m.a)(["\n  max-width: ",";\n  margin: 0 auto;\n  padding: 2rem;\n"]);return B=function(){return e},e}function R(){var e=Object(m.a)(["\n  background: white;\n  color: ",";\n  font-family: 'Roboto', sans-serif;\n  box-sizing: border-box; \n  html {\n    box-sizing: border-box;\n    font-size: 10px;\n  }\n  *, *:before, *:after {\n    box-sizing: inherit;\n  }\n\n  p, label, input, select {\n    padding: 0.5rem;\n    margin: 0;\n    font-size: 1rem;\n  }\n  h1 {\n    padding: 0.5rem;\n    margin: 0;\n    font-size: 1.5rem;\n  }\n  h2 {\n    padding: 0.5rem;\n    margin: 0;\n    font-size: 1.25rem;\n  }\n  a {\n    text-decoration: none;\n    padding: 0.5rem;\n    margin: 0;\n    font-size: 1rem;\n    color: ",";\n  }\n  button { font-family: 'Roboto', sans-serif; }\n  hr {\n    width: 100%;\n    margin-left: auto;\n    margin-right: auto;\n    height: 1px;\n    color: red;\n    font-weight: 100;\n    border-color: rgba(0, 0, 0, 0.05);\n  }\n"]);return R=function(){return e},e}var _={red:"#FF0000",black:"#393939",grey:"#3A3A3A",lightgrey:"#E1E1E1",offWhite:"#EDEDED",maxWidth:"800px",bs:"0 12px 24px 0 rgba(0, 0, 0, 0.09)"},Y=p.b.div(R(),(function(e){return e.theme.black}),_.black),q=p.b.div(B(),(function(e){return e.theme.maxWidth})),G=function(e){function n(){return Object(U.a)(this,n),Object(W.a)(this,Object(F.a)(n).apply(this,arguments))}return Object(I.a)(n,e),Object(L.a)(n,[{key:"render",value:function(){return r.a.createElement(p.a,{theme:_},r.a.createElement(Y,null,r.a.createElement(q,null,this.props.children)))}}]),n}(a.Component);function H(){var e=Object(m.a)(["\n  display: flex;\n  justify-content: stretch;\n  align-items: center;\n  color: red;\n  .sort-btn {\n    display: flex;\n    justify-content: space-around;\n    padding: 1rem;\n    flex-grow: 1;\n    cursor: pointer;\n    text-align: center;\n    border: 1px solid ",";\n    \n  }\n"]);return H=function(){return e},e}function K(){var e=Object(m.a)(["\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 20px;\n  a {\n    background: white;\n    color: grey;\n    margin-left: 20px;\n    font-size: 1.5em;\n  }\n  .logo {\n    font-weight: 900;\n    color: black;\n  }\n"]);return K=function(){return e},e}function Q(){var e=Object(m.a)(["\n  width: 100%;\n  background: ",";\n  color: white;\n  border: 0;\n  font-weight: 600;\n  padding: 0.5rem 1.2rem;\n  font-size: 2rem;\n  cursor: pointer;\n"]);return Q=function(){return e},e}var V=p.b.button(Q(),(function(e){return e.theme.red})),X=p.b.div(K()),Z=p.b.div(H(),(function(e){return e.theme.offWhite}));var $=function(){var e=Object(a.useState)([]),n=Object(s.a)(e,2),t=n[0],o=n[1],c=Object(a.useState)(""),l=Object(s.a)(c,2),m=l[0],p=l[1],b=Object(a.useState)(""),h=Object(s.a)(b,2),v=h[0],E=h[1],y=Object(a.useState)(""),x=Object(s.a)(y,2),j=x[0],w=x[1],C=Object(a.useState)(null),k=Object(s.a)(C,2),S=(k[0],k[1]),N=Object(a.useState)(""),z=Object(s.a)(N,2),T=z[0],P=z[1],U=Object(a.useState)(""),L=Object(s.a)(U,2),W=L[0],F=L[1],I=Object(a.useState)(null),B=Object(s.a)(I,2),R=B[0],_=B[1],Y=Object(a.useState)(!1),q=Object(s.a)(Y,2),H=q[0],K=q[1],Q=Object(a.useState)(!1),$=Object(s.a)(Q,2),ee=$[0],ne=$[1],te=Object(a.useState)(!1),ae=Object(s.a)(te,2),re=ae[0],oe=ae[1],ce=Object(a.useState)(!1),ie=Object(s.a)(ce,2),le=ie[0],ue=ie[1];console.log(ee,re,le),Object(a.useEffect)((function(){A.getAll().then((function(e){return o(e)}))})),Object(a.useEffect)((function(){var e=window.localStorage.getItem("loggedPostappUser");if(e){var n=JSON.parse(e);_(n),A.setToken(n.token)}}),[]);var se=function(e){var n;return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),t.prev=1,t.next=4,u.a.awrap(J.login({username:T,password:W}));case 4:n=t.sent,window.localStorage.setItem("loggedPostappUser",JSON.stringify(n)),A.setToken(n.token),_(n),P(""),F(""),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(1),S("Wrong credentials"),setTimeout((function(){S(null)}),5e3);case 16:case"end":return t.stop()}}),null,null,[[1,12]])},me=function(e){e.preventDefault();var n={title:m,content:v,id:t.length+1};A.create(n).then((function(e){return o(t.concat(e))})),p(""),E("")},de=function(e,n){e.preventDefault();var a={content:j};A.createComment(n,a),t.find((function(e){return e.id===n})).comments.concat(a),w("")},fe=function(e){var n=t.find((function(n){return n.id===e})),a=Object(i.a)({},n,{likes:n.likes+1});A.update(e,a).then((function(a){a.comments=n.comments,o(t.map((function(n){return n.id!==e?n:a})))})).catch((function(a){S("post '".concat(n.content,"' was already  from server")),setTimeout((function(){S(null)}),5e3),o(t.filter((function(n){return n.id!==e})))}))};return r.a.createElement(G,null,r.a.createElement(d.a,null,r.a.createElement(X,null,r.a.createElement("div",null,r.a.createElement(d.b,{to:"/"},r.a.createElement("span",{className:"logo"},"FlipPad"))),r.a.createElement("div",null,!R&&r.a.createElement("div",null,r.a.createElement(d.b,{to:"/login"},"Login"),r.a.createElement(d.b,{to:"/signup"},"SignUp")),R&&r.a.createElement("div",null,r.a.createElement(d.b,{onClick:function(e){e.preventDefault(),_(null),window.localStorage.clear(),P(""),F("")}},"Logout")))),r.a.createElement(f.b,{path:"/login",render:function(){return R?r.a.createElement(f.a,{to:"/"}):r.a.createElement(M,{username:T,password:W,handleUsernameChange:function(e){var n=e.target;return P(n.value)},handlePasswordChange:function(e){var n=e.target;return F(n.value)},handleSubmit:se})}}),r.a.createElement(f.b,{path:"/",render:function(){return r.a.createElement("div",null,r.a.createElement("div",null,R&&r.a.createElement(V,{onClick:function(){return K(!H)}},"Write a post     ",r.a.createElement(O.d,null)),R&&H&&r.a.createElement(g,{title:m,content:v,onTitleChange:function(e){var n=e.target;return p(n.value)},onContentChange:function(e){var n=e.target;return E(n.value)},addPost:me}),r.a.createElement(Z,null,r.a.createElement("div",{className:"sort-btn",onClick:function(){return ne(!ee)}},"Sort by date ",r.a.createElement(O.a,null)),r.a.createElement("div",{className:"sort-btn",onClick:function(){return oe(!re)}},"Sort by likes ",r.a.createElement(O.e,null)),r.a.createElement("div",{className:"sort-btn",onClick:function(){return ue(!le)}},"Sort by comments ",r.a.createElement(O.c,null)))),r.a.createElement("div",{class:"PostBoard"},t&&function(e){return ee&&(e.sort((function(e,n){return new Date(e.date)-new Date(n.date)})),oe(!1),ue(!1)),re&&(e.sort((function(e,n){return e.likes-n.likes})),ne(!1),ue(!1)),le&&(e.sort((function(e,n){return e.comments.length-n.comments.length})),ne(!1),oe(!1)),e}(t).map((function(e){return r.a.createElement(D,Object.assign({},e,{addLike:fe,key:e.id,currentUser:R,comment:j,addComment:de,handleCommentChange:function(e){var n=e.target;return w(n.value)}}))}))))}})))};c.a.render(r.a.createElement($,null),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.b2890f18.chunk.js.map